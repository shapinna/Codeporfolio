---
title: "Introduction and Intermediate R cheatsheet"
author: "Shanmukh"
date: "April 10, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Relational operators

- ==  Equal comparison
- !=  Not equal comparison
- >   Greater than comparison
- <   Less than comparison
- >=
- <=

```{r}
# The linkedin and facebook vectors have already been created for you
linkedin <- c(16, 9, 13, 5, 2, 17, 14)
facebook <- c(17, 7, 5, 16, 8, 13, 14)

# Popular days
linkedin>15

# Quiet days
linkedin<=5

# LinkedIn more popular than Facebook
linkedin>facebook

```

Logical operators

- & And operator
- Or operator
-! Not operator

## Functions
input -- process -- output


Syntax for creating functions

my_func <- function(arg1,arg2){
  body
}

```{r}
# Create a function pow_two()
pow_two <- function(a){
  y<-a*a
  return(y)
}


# Use the function
pow_two(12)

# Create a function sum_abs()
sum_abs<- function(a,b){
  y<-abs(a)+abs(b)
  return(y)
}


# Use the function
sum_abs(-2,3)
```

### for loop



# R intermediate

## strsplit
syntax: strsplit(x, split, fixed = FALSE, perl = FALSE, useBytes = FALSE)
```{r}
pioneers <- c("GAUSS:1777", "BAYES:1702", "PASCAL:1623", "PEARSON:1857")
split_math <- strsplit(pioneers, split = ":")
split_math
```

# Intermate R lapply

lapply takes a vector or list X, and applies the function FUN to each of its members. If FUN requires additional arguments, you pass them after you've specified X and FUN (...). The output of lapply() is a list, the same length as X, where each element is the result of applying FUN on the corresponding element of X.
```{r}
split_low <- lapply(split_math,tolower)

split_low

pioneers <- c("GAUSS:1777", "BAYES:1702", "PASCAL:1623", "PEARSON:1857")
split <- strsplit(pioneers, split = ":")
split_low <- lapply(split, tolower)

# Generic select function
select_el <- function(x, index) {
  x[index]
}

# Use lapply() twice on split_low: names and years
names<- lapply(split_low,select_el,1)
years<- lapply(split_low,select_el,2)

names
years

```
# sapply

simplified version of sapply it will try to generate to array if possible otherwise leave as list

```{r}

```

# vapply
same as sapply but output can be specified
Vapply throws error if the expected output is not returned
```{r}

```

# R functions

abs -- calculates absolute value of numerical values

round -- rounds the integers.

sum -- sums up all the given values

c -- Combines two or more specific values

mean -- calculate mean of the values
```{r}
v1 <- c(1.1,-5.1,2.5,-6.4)
v2 <- c(3.1,2.3,-6.1,-9.9)

sum(round(abs(v1)))
sum(round(abs(v2)))

mean(c(sum(round(abs(v1))),sum(round(abs(v2)))))

```

seq -- sequence of numbers generated by r by parameters given in the argument

rep -- repeats the values

sort -- sort the values

```{r}
li <- list(
  log = TRUE,
  ch = "hello",
  int_vec = sort(rep(seq(8,2, by=-2),times=2))
)

str(li)
```

is.*() -- check whether given variable of same data type and returns result in  logical value

as.*()-- converts the data type

unlist() -- unlist the list function to a vector with lables

```{r}
is.list(li)

is.list(c(1,2,3))

li2 <- as.list(c(1,2,3))

is.list(li2)

unlist(li)

```
append-- allows to add elements to vector or a list 
rev -- reverses elements in a data structure

```{r}
str(append(li,rev(li)))

```


# Times and dates

```{r}
today<-Sys.Date()  # todays date
now <- Sys.time() # current time

str(today)
str(now)

my_date <- as.Date("2010-15-05",format="%Y-%d-%m")  # Default format %Y-%m-%d
str(my_date)

#Arithmetics

New_date2 <- as.Date("2005-06-06")

my_date-New_date2 # time difference from two dates

unclass(today) # today value stored in R it is no of days from 1 jan 1970

unclass(now) # current time value stored in R


```

advanced date packages are lubridate, zoo, xts

as.date formats:
%Y: 4-digit year (1982)
%y: 2-digit year (82)
%m: 2-digit month (01)
%d: 2-digit day of the month (13)
%A: weekday (Wednesday)
%a: abbreviated weekday (Wed)
%B: month (January)
%b: abbreviated month (Jan)

as.POSIXct formats:
%H: hours as a decimal number (00-23)
%I: hours as a decimal number (01-12)
%M: minutes as a decimal number
%S: seconds as a decimal number
%T: shorthand notation for the typical format %H:%M:%S
%p: AM/PM indicator

```{r}
x <- list(2006, 2004, 2020, 2002)
for(i in 1:length(x)) {
    if(x[[i]] %% 4 != 0) next
  print(paste(x[[i]], "is a leap year"))
}
```


